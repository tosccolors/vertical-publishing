<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>




        <record id="view_order_form_advertising" model="ir.ui.view">
            <field name="name">sale.order.form.advertising</field>
            <field name="model">sale.order</field>
			<field name="priority">20</field>
            <field name="arch" type="xml">
                <form string="Sales Order" class="o_sale_order">
                <header>
                    <field name="ver_tr_exc" invisible="1"/>
                    <field name="id" invisible="1"/>

                    <button name="%(sale.action_view_sale_advance_payment_inv)d" string="Create Invoice"
                        type="action" context="{'default_advance_payment_method': 'percentage'}"
                        attrs="{'invisible': ['|',('invoice_status', '!=', 'no'), ('state', '!=', 'sale')]}"
                        groups="sale_advertising_order.group_traffic_user"/>

					<button name="action_submit" attrs="{'invisible': ['|',('state','not in',['draft']),('ver_tr_exc','!=',True)]}" type="object"
                            string="Submit for Approval" class="oe_highlight"
							groups="sales_team.group_sale_salesman"/>
					<button name="action_approve1" states="submitted" type="object" string="Approval Sales Support" class="oe_highlight"
							groups="sale_advertising_order.group_traffic_user, sale_advertising_order.group_senior_sales "/>
					<button name="action_refuse" string="Refuse" type="object" states="submitted"
							groups="sale_advertising_order.group_traffic_user,sale_advertising_order.group_senior_sales"/>
                    <button name="action_confirm" string="Confirm Sale" class="btn-primary o_sale_confirm"
                            attrs="{'invisible': ['|','|',('state','in',['cancel','sale','done']),('id','=',False),
                                                          ('ver_tr_exc','=',True),('state','in',['cancel','draft','submitted'])]}"
                            groups="sales_team.group_sale_salesman" type="object" />
                    <button name="action_quotation_send" string="Send by Email" type="object"
                            attrs="{'invisible': ['|','|',('state','in',['cancel','sent','done']),('id','=',False),
                                                      ('ver_tr_exc','=',True),('state','in',['cancel','draft','submitted'])]}"
                            class="btn-primary"	groups="sales_team.group_sale_salesman"/>
                    <button name="print_quotation" string="Print" type="object"
                            attrs="{'invisible': ['|','|',('state','in',['cancel','submitted','sent','done']),('id','=',False),
                                                      ('ver_tr_exc','=',True),('state','in',['cancel','draft','submitted'])]}"
                            class="btn-primary" groups="sales_team.group_sale_salesman"/>
                    <button name="action_cancel" states="draft,submitted,approved1,sent,sale" type="object" string="Cancel"/>
                    <button name="action_draft" states="cancel" type="object" string="Set to Quotation"/>
                    <button name="action_done" type="object" string="Lock" states="sale" groups="sale_advertising_order.group_traffic_user"/>
                            help="If the sale is locked, you can not modify it anymore. However, you will still be able to invoice or deliver."/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,submitted,approved1,sent,sale,done"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_view_invoice" groups="sale_advertising_order.group_traffic_user"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-pencil-square-o"
                            attrs="{'invisible': [('invoice_count', '=', 0)]}">
                            <field name="invoice_count" widget="statinfo" string="Invoices"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <h1>
                            <field name="name" readonly="1"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="pub_cust_domain" invisible="1"/>
                            <field name="published_customer"
                                   context="{'tree_view_ref': 'nsm_crm.view_partner_tree_nsm_crm'}"
                                   domain="pub_cust_domain"
                                   attrs="{'readonly':['|',('state','in', ['cancel','done']),('state','in', ['sale']),('invoice_status','not in','not invoiced')]}"
                                   required="True"/>
                            <field name="partner_id" string="Payer"
                                   domain="[('customer','=',True), ('parent_id','=', False)]"
                                   context="{'search_default_customer':1, 'show_address': 1}" options='{"always_reload": True}'
                                   attrs="{'readonly':['|',('state','in', ['cancel','done']),('state','in', ['sale']),('invoice_status','not in','not invoiced')]}"/>
                            <field name="partner_invoice_id" string="Payer Invoice Address"
                                   context="{'default_type':'invoice', 'show_address': 1}" domain="[('id','child_of',partner_id)]"
                                   attrs="{'readonly':['|',('state','in', ['cancel','done']),('state','in', ['sale']),('invoice_status','not in','not invoiced')]}"
                                   groups="sale.group_delivery_invoice_address"/>
                            <field name="customer_contact" required="False" context="{'default_parent_id': partner_id, 'show_email': 1}"
                                   domain="[('is_company', '=', False), ('customer', '=', True),('parent_id', '=', partner_id),('type', '=', 'contact')]"
                                   options='{"always_reload": True}'
                                   attrs="{'readonly':[('state','in', ['cancel','done'])]}"/>
                            <field name="advertising_agency"
                                   domain="[('is_ad_agency','=', True),('customer','=',True), ('is_company','=', True)]"
                                   attrs="{'readonly':['|',('state','in', ['cancel','done']),('state','in', ['sale']),('invoice_status','not in','not invoiced')]}" />
                            <field name="nett_nett"/>
                            <field name="agency_is_publish" />
                            <field name="opportunity_subject" required="True" string="Subject"/>
                        </group>
                        <group>
                            <field name="date_order" attrs="{'invisible': [('state', 'in', ['sale', 'done', 'cancel'])]}"/>
                            <field name="validity_date" attrs="{'invisible': [('state', 'in', ['sale', 'done'])]}"/>
                            <field name="confirmation_date" attrs="{'invisible': [('state', 'in', ['draft', 'sent', 'cancel'])]}"/>
                            <field name="client_order_ref" string="Client Order Reference"/>
						    <field name="traffic_employee" invisible="1" string="Traffic Employee" groups="sale_advertising_order.group_traffic_user"/>
                            <field name="traffic_comments" invisible="1" string="Traffic Comments"/>
						    <field name="traffic_appr_date" invisible="1" string="Traffic Approval Date" readonly="True"/>
                            <field name="pricelist_id" groups="product.group_sale_pricelist"/>
                            <field name="currency_id" invisible="1"/>
                            <field name="payment_term_id" options="{'no_create': True}"/>
                            <field name="payment_mode_id" domain="[('payment_type', '=', 'inbound')]" widget="selection"/>
                            <field name="display_discount_to_customer"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Order Lines" name="order_line">
                            <field name="order_line" mode="tree,kanban"
                                   attrs="{'readonly': ['|',('state', 'in', ['done','cancel']),('state', 'in', ['approved1','sent']),('ver_tr_exc','=',True)]}">
                                <form string="Sales Order Lines">
                                    <group>
                                        <group>
                                            <field name="medium" required="True"
                                                   domain="[('parent_id','=', %(sale_advertising_order.advertising_category)d)]"
                                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"/>
                                            <field name="ad_class" required="True"
                                                   domain="[('type','!=', 'view'), ('id','child_of', medium)]"
                                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"/>
                                            <field name="title" string="Title"
                                                   domain="[('child_ids','!=', False),('medium','child_of', medium)]"
                                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"
                                                   attrs="{'invisible': [('title','=', False)]}"/>
                                            <field name="title_ids" string="Titles"
                                                   attrs="{'invisible': [('title','!=', False),('title_ids','=', [])]}"
                                                   domain="[('parent_id','=', False),('medium','child_of', medium)]"
                                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"
                                                   context="{'search_view_ref':'sale_advertising_order.view_advertising_issue_filter',
                                                             'tree_view_ref':'sale_advertising_order.advertising_issue_titles_tree' }">
                                                <tree create="true" edit="false" delete="true" copy="false">
                                                    <field name="name" string="Name" readonly="1"/>
                                                </tree>
                                            </field>
                                            <field name="deadline_offset" invisible="1" />
                                            <field name="deadline_passed" invisible="1" />
                                            <field name="deadline" invisible="0" />
                                            <field name="adv_issue_ids" string="Advertising Issues" readonly="0"
                                                   attrs="{'invisible': ['|',('adv_issue','!=', False),('issue_product_ids','!=', [])]}"
                                                   domain="[('parent_id','!=', False),
                                                            '|',('parent_id','in', title_ids and title_ids[0][2]),('parent_id','=', title),
                                                            '|','|',('deadline','&gt;=', deadline_offset),('deadline','=', False),
                                                                    ('issue_date','&lt;=', datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S'))]"

                                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"
                                                   context="{'search_view_ref':'sale_advertising_order.view_advertising_issue_filter', 'tree_view_ref':'sale_advertising_order.advertising_issue_ids_tree' }">
                                                <tree create="true" edit="false" delete="true" copy="false">
                                                    <field name="name" string="Name" readonly="1"/>
                                                </tree>
                                            </field>
                                            <field name="product_template_id"
                                                   context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'company_id': parent.company_id}"
                                                   attrs="{'readonly': ['|','|', ('qty_invoiced', '&gt;', 0), ('procurement_ids', '!=', []),
                                                                                 ('deadline_passed','=', True)]}"
                                                   domain="[('categ_id','=', ad_class)]"
                                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}" required="1"/>
                                            <field name="product_id" invisible="1" groups="base.group_no_one"
                                                   context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'company_id': parent.company_id}"
                                                   attrs="{'readonly': ['|', ('qty_invoiced', '&gt;', 0), ('procurement_ids', '!=', [])]}"
                                                   domain="['|','&amp;',('categ_id','=', ad_class),('attribute_value_ids','=', False),('product_tmpl_id','=', product_template_id)]"
                                                   options="{'no_open': True,'no_create': True, 'no_create_edit': True}"/>
                                            <field name="booklet_surface_area" invisible="0"/>
                                            <field name="layout_category_id" groups="sale.group_sale_layout"/>
                                            <field name="invoice_status" invisible="1"/>
                                            <field name="qty_to_invoice" invisible="1"/>
                                            <field name="qty_delivered_updateable" invisible="1"/>
                                            <field name="procurement_ids" invisible="1"/>
                                            <field name="nett_nett" />
                                            <field name="multi_line" invisible="0" groups="base.group_no_one"/>
                                            <field name="multi_line_number" invisible="0" readonly="True" groups="base.group_no_one"/>
                                            <label for="product_uom_qty" string="Ordered Quantity"/>
                                            <div>
                                                <field name="product_uom_qty" class="oe_inline"
                                                       context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id,
                                                                    'uom':product_uom, 'uom_qty_change':True, 'company_id': parent.company_id}"
                                                       attrs="{'readonly': [('deadline_passed','=', True)]}"/>
                                                <field name="product_uom" groups="product.group_uom" class="oe_inline oe_no_button"
                                                       readonly="True"/>
                                            </div>
                                            <label for="qty_delivered" string="Delivered Quantity" invisible="context.get('hide_sale')" groups="base.group_no_one"/>
                                            <div invisible="context.get('hide_sale')" groups="base.group_no_one">
                                                <field name="qty_delivered" attrs="{'readonly': [('qty_delivered_updateable', '=', False)]}"/>
                                            </div>
                                            <label for="qty_invoiced" string="Invoiced Quantity" invisible="context.get('hide_sale')" groups="base.group_no_one"/>
                                            <div invisible="context.get('hide_sale')" groups="base.group_no_one">
                                                <field name="qty_invoiced" invisible="context.get('hide_sale')"/>
                                            </div>
                                            <field name="adv_issue" options="{'no_open': True,'no_create': True, 'no_create_edit': True}"
                                                   domain="[('parent_id','!=', False),
                                                            ('parent_id','=', title),
                                                            '|','|',('deadline','&gt;=', deadline_offset),
                                                                    ('deadline','=', False),
                                                                    ('issue_date','&lt;=', datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')),]"
                                                   attrs="{'invisible': [('adv_issue','=', False)]}"/>
                                            <field name="issue_date" readonly="1"
                                                   attrs="{'invisible': [('adv_issue','=', False)]}"/>

                                        </group>
                                        <group>
                                            <field name="tax_id" widget="many2many_tags"
                                                domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                                                groups="sale_advertising_order.group_traffic_user"
                                                attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"/>
                                            <field name="price_edit" invisible="1"/>
                                            <field name="price_unit" readonly="0" attrs="{'invisible': ['|',('multi_line','=', True),('price_edit','!=', True)]}"/>
                                            <field name="price_unit_dummy" readonly="1" attrs="{'invisible': ['|',('multi_line','=', True),('price_edit','=', True)]}"/>
                                            <field name="comb_list_price" readonly="True" attrs="{'invisible': [('multi_line','=', False)]}"/>
                                            <field name="color_surcharge" />
                                            <field name="color_surcharge_amount" attrs="{'invisible': [('color_surcharge','=', False)]}"/>
                                            <field name="actual_unit_price" attrs="{'invisible': [('multi_line','=', True)]}"/>
                                            <label for="computed_discount" groups="sale.group_discount_per_so_line"/>
                                                <div name="computed_discount" groups="sale.group_discount_per_so_line">
                                                    <field name="computed_discount" class="oe_inline"/> %%
                                                </div>
                                            <field name="discount_reason_id" attrs="{'invisible': [('computed_discount','=', 0.0)],'required': [('computed_discount','!=', 0.0)]}"/>
                                            <field name="subtotal_before_agency_disc" readonly="False"/>
                                            <label for="discount" string="Agency Commission" groups="sale.group_discount_per_so_line"/>
                                                <div name="discount" groups="sale.group_discount_per_so_line">
                                                    <field name="discount" invisible="1"/>
                                                    <field name="discount_dummy" class="oe_inline"/> %%
                                                </div>
                                            <field name="price_subtotal" readonly="True" />
                                            <field name="date_type" invisible="True"/>
                                            <label for="customer_lead" groups="base.group_no_one"/>
                                            <div groups="base.group_no_one">
                                                <field name="customer_lead" class="oe_inline" groups="base.group_no_one"/> days
                                            </div>
                                            <field name="page_class_domain" invisible="1"/>
                                            <label for="analytic_tag_ids" string="Page Category"/>
                                            <div>
                                                <field name="analytic_tag_ids"
                                                       string="Page Category"
                                                       widget="many2many_tags"
                                                       domain="page_class_domain"
                                                       attrs="{'readonly': [('deadline_passed','=', True)]}"/>
                                            </div>
                                            <field name="proof_number_adv_customer" />
                                            <field name="proof_number_payer" />
                                        </group>
                                    </group>
                                    <group>
                                        <field name="dates" string="Advertising Dates" colspan="4"
                                           attrs="{'invisible':['|','|',('adv_issue','=',False),('title','=',False),('date_type','!=','date')]}">
                                            <tree string="Ad Dates" editable="bottom">
                                                <field name="sequence" widget="handle" />
                                                <field name="issue_date" string="Ad Date" required="True" />
                                                <field name="name" string="Comment" />
                                                <field name="page_reference" string="Ref" />
                                                <field name="ad_number" string="Ad No." />
                                            </tree>
                                        </field>
                                        <field name="dateperiods" string="Advertising Periods" colspan="4"
                                            attrs="{'invisible':[('date_type','!=','validity')]}">
                                            <tree string="Ad Periods" editable="bottom">
                                                <field name="sequence" widget="handle" />
                                                <field name="from_date" string="Start of Validity" required="True"/>
                                                <field name="to_date" string="End of Validity" required="True"/>
                                                <field name="name" string="Comment" />
                                                <field name="page_reference" string="Page Pref" />
                                                <field name="ad_number" string="Ad No." />
                                            </tree>
                                        </field>
                                        <field name="issue_product_ids" string="Adv.Issues with Products and Prices"
                                               attrs="{'invisible':[('issue_product_ids','=',[])]}"
                                               options="{'no_create': True, 'no_create_edit': True}" readonly="0">
                                            <tree string="Issues Products Prices" editable="bottom">
                                                <field name="adv_issue_id" string="Issue" domain="[('parent_id','in', parent.title_ids and parent.title_ids[0][2])]"/>
                                                <field name="product_attribute_value_id" invisible="True" />
                                                <field name="product_id" string="Product" domain="[('product_tmpl_id','=', parent.product_template_id), ('attribute_value_ids','in', product_attribute_value_id)]"/>
                                                <field name="price_edit" string="Price editable" invisible="1"/>
                                                <field name="price_unit" string="Unit Price"
                                                       attrs="{'readonly': [('price_edit','!=', True)]}"/>
                                                <field name="qty" string="Qty"/>
                                                <field name="price" string="Price"/>
                                                <field name="page_reference" string="Page Pref." />
                                                <field name="ad_number" string="External Ref." />
                                                <field name="url_to_material" string="URL Ad Material" />
                                            </tree>
                                        </field>

                                        <group name="ad_refs">
                                            <field name="ad_number"/>
                                            <field name="page_reference"/>
                                            <field name="url_to_material" />
                                        </group>
                                        <group attrs="{'invisible':[('date_type','!=','validity')]}">
                                            <field name="from_date"
                                                   attrs="{'invisible':[('date_type','!=','validity')]}"/>
                                            <field name="to_date"
                                                   attrs="{'invisible':[('date_type','!=','validity')]}"/>
                                        </group>
                                    </group>
                                    <group>
                                        <group>
                                            <separator string="Material Remarks" colspan="2"/>
                                            <field name="layout_remark" colspan="2" nolabel="1"/>
                                        </group>
                                        <group>
                                            <separator string="Mapping Remarks" colspan="2"/>
                                            <field name="name" colspan="2" nolabel="1"/>
                                        </group>
                                        <group>
                                            <separator string="Migration Remarks" colspan="2"/>
                                            <field name="mig_remark" colspan="2" nolabel="1"/>
                                        </group>
                                    </group>
                                    <div groups="base.group_no_one">
                                        <label for="invoice_lines"/>
                                        <field name="invoice_lines"/>
                                    </div>
                                    <field name="state" invisible="1"/>
                                </form>

                                <tree string="Sales Order Lines"  decoration-info="invoice_status=='to invoice'" default_order='issue_date'>
                                    <field name="sequence" widget="handle"/>
                                    <field name="id"/>
                                    <field name="title" />
                                    <field name="issue_date" />
                                    <field name="ad_class" groups="base.group_no_one"/>
                                    <field name="product_id"
                                        attrs="{'readonly': ['|', ('qty_invoiced', '&gt;', 0), ('procurement_ids', '!=', [])]}"
                                        context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'company_id': parent.company_id}"
                                       />
                                    <!--field name="layout_category_id" groups="sale.group_sale_layout,base.group_no_one" /-->
                                    <field name="layout_category_id" groups="base.group_no_one" />
                                    <field name="name" groups="base.group_no_one"/>
                                    <field name="ad_number"/>
						            <field name="page_reference"/>
                                    <field name="qty_invoiced"
                                            invisible="context.get('hide_sale')" groups="base.group_no_one"/>
                                    <field name="qty_to_invoice" invisible="1"/>
                                    <field name="analytic_tag_ids" groups="analytic.group_analytic_accounting" string="Page Category" invisible="0" widget="many2many_tags"/>
									<field name="price_unit" readonly="1"/>
                                    <field name="product_uom_qty"/>
                                    <field name="product_uom"
                                            attrs="{'readonly': [('state', 'in', ('sale','done', 'cancel'))]}"
                                            context="{'company_id': parent.company_id}"
                                            groups="product.group_uom" options='{"no_open": True}'/>
                                    <field name="actual_unit_price" widget="monetary"/>
                                    <field name="comb_list_price" widget="monetary"/>
                                    <field name="computed_discount" />
                                    <field name="subtotal_before_agency_disc" widget="monetary"/>
                                    <field name="discount_dummy" />
                                    <field name="tax_id" widget="many2many_tags" domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                                            attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"
                                            groups="account.group_account_invoice, sale_advertising_order.group_traffic_user"/>
                                    <field name="discount" groups="sale.group_discount_per_so_line" invisible="1"/>
                                    <field name="price_subtotal" widget="monetary" groups="sale.group_show_price_subtotal"/>
                                    <field name="price_total" widget="monetary" groups="sale.group_show_price_total"/>
                                    <field name="qty_delivered_updateable" invisible="1"/>
                                    <field name="procurement_ids" invisible="1"/>
                                    <field name="state" invisible="1"/>
                                    <field name="invoice_status" invisible="1"/>
                                    <field name="customer_lead" invisible="1"/>
                                    <field name="currency_id" invisible="1"/>
                                </tree>
                                <kanban class="o_kanban_mobile">
                                    <field name="product_id"/>
                                    <field name="product_uom_qty"/>
                                    <field name="product_uom" groups="product.group_uom" invisible="1"/>
                                    <field name="price_subtotal"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <strong><span><t t-esc="record.product_id.value"/></span></strong>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-8 text-muted">
                                                        <span><t t-esc="record.product_uom_qty.value"/> <t t-esc="record.product_uom.value"/></span>
                                                    </div>
                                                    <div class="col-xs-4 text-muted">
                                                        <span class="pull-right text-right"><t t-esc="record.price_subtotal.value"/></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                            </field>
                            <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                                <field name="amount_untaxed" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                                <field name="amount_tax" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                                <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                    <label for="amount_total" />
                                    <button name="button_dummy"
                                        states="draft,sent" string="(update)" type="object" class="oe_edit_only oe_link"/>
                                </div>
                                <field name="amount_total" nolabel="1" class="oe_subtotal_footer_separator" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                            </group>
                            <field name="note" class="oe_inline" placeholder="Setup default terms and conditions in your company settings."/>
                            <div class="oe_clear"/>
                        </page>
                        <page string="Other Information">
                            <group>
								<group string="Shipping Information" name="sale_shipping" groups="base.group_no_one">
								</group>
                                <group string="Sales Information" name="sales_person">
                                    <field name="user_id"/>
                                    <field name="team_id" options="{'no_create': True}"/>
                                    <field name="partner_acc_mgr"/>
									<field name="tag_ids" widget="many2many_tags"/>
                                    <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                                    <field name="project_id" attrs="{'invisible':[('state','=','sale'),('published_customer','!=', False)]}"
                                           context="{'default_partner_id':partner_invoice_id, 'default_name':name}" groups="analytic.group_analytic_accounting"/>
                                </group>
                                <group name="sale_pay" string="Invoicing">
                                    <field name="fiscal_position_id" options="{'no_create': True}"/>
                                    <field name="invoice_status"
                                        attrs="{'invisible': [('state', 'not in', ('sale','done'))]}"/>
                                    <field name="advertising" invisible="1"/>
                                </group>
                                <group string="Reporting" name="technical" >
                                    <field name="origin"/>
									<field name="campaign_id" />
									<field name="medium_id" />
									<field name="source_id" />
									<field name="opportunity_id" help="Log in the chatter from which opportunity the order originates" />
                                </group>

                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>

        <!--Inherited sale order form regular-->
        <record id="view_order_form_inherited" model="ir.ui.view">
            <field name="name">sale.order.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='team_id']" position="after">
                    <field name="partner_acc_mgr" />
                </xpath>
            </field>
        </record>

        <record id="view_order_form_advertising_no_deadline_check" model="ir.ui.view">
            <field name="name">sale.order.form.advertising.ndl</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale_advertising_order.view_order_form_advertising"/>
            <field name="groups_id" eval="[(4, ref('sale_advertising_order.group_no_deadline_check'))]"/>
            <field name="arch" type="xml">
                <field name="adv_issue_ids" position="attributes">
                     <attribute name="domain" >[('parent_id','!=', False),'|',('parent_id','in', title_ids and title_ids[0][2]),('parent_id','=', title)]</attribute>
                </field>
                <field name="product_template_id" position="attributes">
                     <attribute name="attrs" >{'readonly': ['|',('qty_invoiced', '&gt;', 0), ('procurement_ids', '!=', [])]}</attribute>
                </field>
                <field name="product_uom_qty" position="attributes">
                     <attribute name="readonly" >False</attribute>
                </field>
                <field name="product_uom" position="attributes">
                     <attribute name="attrs" >{'readonly': [('state', 'in', ('sale','done', 'cancel'))]}</attribute>
                </field>
                <field name="analytic_tag_ids" position="attributes">
                    <attribute name="attrs" ></attribute>
                </field>
                <field name="adv_issue" position="attributes">
                     <attribute name="domain" >[('parent_id','!=', False),('parent_id','=', title)]</attribute>
                </field>

            </field>
        </record>

        <record id="view_order_form_advertising_senior_sales" model="ir.ui.view">
            <field name="name">sale.order.form.advertising.ss</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale_advertising_order.view_order_form_advertising"/>
            <field name="groups_id" eval="[(4, ref('sale_advertising_order.group_senior_sales'))]"/>
            <field name="arch" type="xml">
                <button name="action_confirm" position="attributes">
                     <attribute name="attrs" >{'invisible': [('state','in',['cancel','sale','done'])]}</attribute>
                </button>
                <button name="action_quotation_send" position="attributes">
                     <attribute name="attrs" >{'invisible': [('state', 'in',['cancel','sent','done'])]}</attribute>
                </button>
                <button name="print_quotation" position="attributes">
                     <attribute name="attrs" >{'invisible': [('state', 'in',['cancel','sent','done'])]}</attribute>
                </button>
                <xpath expr="//page[@name='order_line']/field[@name='order_line']" position="attributes">
                     <attribute name="attrs" >{'readonly': [('state', 'in', ['done','cancel'])]}</attribute>
                </xpath>

            </field>
        </record>

        <record id="view_order_advertising_tree" model="ir.ui.view">
            <field name="name">sale.order.advertising.tree</field>
            <field name="model">sale.order</field>
            <field name="priority">20</field>
            <field name="arch" type="xml">
                <tree string="Sales Orders" decoration-bf="message_needaction==True" decoration-muted="state=='cancel'">
                    <field name="message_needaction" invisible="1"/>
                    <field name="name" string="Order Number"/>
                    <field name="date_order"/>
                    <field name="opportunity_subject"/>
                    <field name="published_customer"/>
                    <field name="advertising_agency"/>
                    <field name="partner_acc_mgr"/>
                    <field name="user_id"/>
                    <field name="amount_untaxed" sum="Total Amount Untaxed" widget="monetary"/>
                    <field name="traffic_appr_date" string="Traffic Date" invisible="1"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="invoice_status"/>
                    <field name="state" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="advertising_order_view_search_inherit_sale" model="ir.ui.view">
            <field name="name">advertising.sale.order.search.inherit.sale</field>
            <field name="model">sale.order</field>
            <field name="mode">primary</field>
            <field name="inherit_id" ref="sale.view_sales_order_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='my_sale_orders_filter']" position="after">
                    <separator/>
                    <filter string="Sales" name="sales" domain="[('state','in',('sale','done'))]" />
                    <filter name="accmgr_sale_orders_filter" string="My Sales Orders (Account Manager)"
                            domain="[('partner_acc_mgr','=',uid)]" help="My Sales Orders as Account manager" />
                    <field name="partner_acc_mgr"/>
                    <field name="published_customer"/>
                    <field name="advertising_agency"/>
                    <separator/>
                    <filter string="To Invoice" domain="[('invoice_status','=','to invoice')]" />
                    <!--filter string="Upselling" domain="[('invoice_status','=','upselling')]" /-->

                    <separator/>
                    <filter string="Submitted" name="submitted" domain="[('state','in',('submitted',))]"/>
                    <filter string="Sales Mgr Approved" name="approved1" domain="[('state','in',('approved1',))]"/>
                    <!--filter string="Traffic Approved" name="approved2" domain="[('state','in',('approved2',))]"/-->
                </xpath>

                <field name="project_id" position="after" >
                    <field name="date_from" string="Order Date From" filter_domain="[('date_order','&gt;=',self)]"/>
                    <field name="date_to" string="Order Date To" filter_domain="[('date_order','&lt;=',self)]"/>
                    <!--field name="date_from" string="Traffic Date From" filter_domain="[('traffic_appr_date','&gt;=',self)]"/>
                    <field name="date_to" string="Traffic Date To" filter_domain="[('traffic_appr_date','&lt;=',self)]"/-->
                </field>
                <xpath expr="." position="inside">
                    <filter string="Account Manager" icon="terp-personal" domain="[]" context="{'group_by':'partner_acc_mgr'}"/>
                </xpath>
            </field>
        </record>

        <record id="action_orders_advertising" model="ir.actions.act_window">
            <field name="name">Sales Orders</field>
            <field name="res_model">sale.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,pivot,graph</field>
            <field name="search_view_id" ref="advertising_order_view_search_inherit_sale"/>
            <field name="domain">[('advertising','=',True),('state','in',('sale','done'))]</field>
            <field name="context">{'default_advertising':True}</field>
            <!--<field name="context">{-->
                    <!--'search_default_team_id': [active_id],-->
                    <!--'default_team_id': active_id,-->
                <!--}-->
            <!--</field>-->
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Create a Quotation, the first step of a new sale.
              </p><p>
                Your next actions should flow efficiently: confirm the Quotation to a Sale Order, then create the Invoice and collect the Payment.
              </p><p>
                Note that once a Quotation becomes a Sale Order, it will be moved from the Quotations list to the Sales Order list.
              </p>
            </field>
        </record>

        <record id="action_orders_advertising_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="act_window_id" ref="action_orders_advertising"/>
        </record>

        <record id="action_orders_advertising_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_order_advertising_tree"/>
            <field name="act_window_id" ref="action_orders_advertising"/>
        </record>


        <!--Action for Advertising Sales smart button in Customers-->
        <record id="action_orders_advertising_smart_button" model="ir.actions.act_window">
            <field name="name">Advertising Sales Orders</field>
            <field name="res_model">sale.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="search_view_id" ref="advertising_order_view_search_inherit_sale"/>
            <field name="domain">[('advertising','=',True),('state','in',('sale','done')),'|',('published_customer','=',active_id),
                                    ('advertising_agency','=',active_id)]</field>
            <field name="context">{'default_advertising':True,'default_published_customer': active_id}</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Create a Quotation, the first step of a new sale.
              </p><p>
                Your next actions should flow efficiently: confirm the Quotation to a Sale Order, then create the Invoice and collect the Payment.
              </p><p>
                Note that once a Quotation becomes a Sale Order, it will be moved from the Quotations list to the Sales Order list.
              </p>
            </field>
        </record>

        <record id="action_orders_advertising_smart_button_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="act_window_id" ref="action_orders_advertising_smart_button"/>
        </record>

        <record id="action_orders_advertising_smart_button_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_order_advertising_tree"/>
            <field name="act_window_id" ref="action_orders_advertising_smart_button"/>
        </record>

        <record id="view_quotation_advertising_tree" model="ir.ui.view">
            <field name="name">sale.order.advertising.tree</field>
            <field name="model">sale.order</field>
            <field name="priority">40</field>
            <field name="arch" type="xml">
                <tree string="Quotation" class="o_sale_order" decoration-bf="message_needaction==True" decoration-muted="state=='cancel'">
                    <field name="message_needaction" invisible="1"/>
                    <field name="name" string="Quotation Number"/>
                    <field name="date_order"/>
                    <field name="opportunity_subject"/>
                    <field name="published_customer"/>
                    <field name="advertising_agency"/>
                    <field name="partner_acc_mgr"/>
                    <field name="user_id"/>
                    <field name="amount_untaxed" sum="Total Amount Untaxed" widget="monetary"/>
                    <field name="traffic_appr_date" string="Traffic Date"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="sale.sale_order_view_search_inherit_quotation" model="ir.ui.view">
            <field name="name">sale.order.search.inherit.quotation</field>
            <field name="model">sale.order</field>
            <field name="mode">primary</field>
            <field name="inherit_id" ref="sale.view_sales_order_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='my_sale_orders_filter']" position="after">
                    <separator/>
                    <filter string="Quotations" name="draft" domain="[('state','=','draft')]"/>
                    <filter string="Quotations Sent" name="sent" domain="[('state','=','sent')]"/>
                    <filter string="Sales" name="sales" domain="[('state','in',('sale','done'))]"/>
                    <separator/>
                    <filter string="Overdue Quotations" name="overdue_quotes"
                            domain="[('validity_date', '&lt;', context_today().strftime('%Y-%m-%d'))]"
                            help="Show all regular quotations for which the expiration date is before today"/>
                </xpath>
            </field>
        </record>

        <record id="advertising_order_view_search_inherit_quotation" model="ir.ui.view">
            <field name="name">advertising.sale.order.search.inherit.quotation</field>
            <field name="model">sale.order</field>
            <field name="mode">primary</field>
            <field name="inherit_id" ref="sale.view_sales_order_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='my_sale_orders_filter']" position="after">
                    <separator/>
                    <filter string="Quotations Draft" name="draft" domain="[('state','=','draft')]"/>
                    <filter string="Quotations Sent" name="sent" domain="[('state','=','sent')]"/>
                    <filter string="Quotations" name="quotations" domain="[('state','not in',('sale','done','cancel'))]"/>
                    <separator/>
                    <filter string="Sales" name="sales" domain="[('state','in',('sale','done'))]"/>
                    <filter name="accmgr_sale_orders_filter" string="My Sales Orders (Account Manager)" domain="[('partner_acc_mgr','=',uid)]" help="My Sales Orders as Account manager" icon="terp-personal" />
                    <field name="partner_acc_mgr"/>

                    <separator/>
                    <filter string="Submitted" name="submitted" domain="[('state','in',('submitted',))]"/>
                    <filter string="Sales Mgr Approved" name="approved1" domain="[('state','in',('approved1',))]"/>
                    <filter string="Traffic Approved" name="approved2" domain="[('state','in',('approved2',))]"/>

                    <separator/>
                    <filter string="Overdue Quotations" name="overdue_quotes"
                            domain="[('validity_date', '&lt;', context_today().strftime('%Y-%m-%d'))]"
                            help="Show all advertising quotations for which the expiration date is before today"/>
                </xpath>

                <field name="project_id" position="after" >
                    <field name="date_from" string="Order Date From" filter_domain="[('date_order','&gt;=',self)]"/>
                    <field name="date_to" string="Order Date To" filter_domain="[('date_order','&lt;=',self)]"/>
                    <field name="date_from" string="Traffic Date From" filter_domain="[('traffic_appr_date','&gt;=',self)]"/>
                    <field name="date_to" string="Traffic Date To" filter_domain="[('traffic_appr_date','&lt;=',self)]"/>
                </field>
                <xpath expr="." position="inside">
                    <filter string="Account Manager" icon="terp-personal" domain="[]" context="{'group_by':'partner_acc_mgr'}"/>
                </xpath>
            </field>
        </record>

        <record id="action_quotations_advertising" model="ir.actions.act_window">
            <field name="name">Quotations </field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_quotation_advertising_tree"/>
            <field name="view_mode">tree,kanban,form,calendar,pivot,graph</field>
            <field name="search_view_id" ref="advertising_order_view_search_inherit_quotation"/>
            <field name="context">{'hide_sale': True, 'default_advertising':True}</field>
            <field name="domain">[('advertising','=',True),('state','not in',('sale','done'))]</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Create a Quotation, the first step of a new sale.
              </p><p>
                Your next actions should flow efficiently: confirm the Quotation
                to a Sale Order, then create the Invoice and collect the Payment.
              </p><p>
                Note that once a Quotation becomes a Sale Order, it will be moved
                from the Quotations list to the Sales Order list.
              </p>
            </field>
        </record>

        <record id="action_quotations_advertising_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="act_window_id" ref="action_quotations_advertising"/>
        </record>

        <record id="action_quotations_advertising_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_quotation_advertising_tree"/>
            <field name="act_window_id" ref="action_quotations_advertising"/>
        </record>



<!-- New Menuitem -->

		<record model="ir.actions.act_window" id="all_advertising_orders_action">
			<field name="name">All Advertising Sale Orders</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">sale.order</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('advertising','=',True),('published_customer','&lt;&gt;', False)]</field>
            <field name="context">{'default_advertising' : True}</field>
		</record>

        <record id="all_advertising_orders_action_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="act_window_id" ref="all_advertising_orders_action"/>
        </record>

        <record id="all_advertising_orders_action_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_order_advertising_tree"/>
            <field name="act_window_id" ref="all_advertising_orders_action"/>
        </record>

        <record id="sale_action_quotations_new_adv" model="ir.actions.act_window">
            <field name="name">Quotation</field>
            <field name="res_model">sale.order</field>
            <field name="view_mode">form,tree,graph</field>
            <field name="domain">[('opportunity_id', '=', active_id), ('advertising','=',True)]</field>
            <field name="context">{'search_default_opportunity_id': active_id,
                'default_opportunity_id': active_id, 'default_advertising':True}</field>
        </record>

        <record id="sale_action_quotations_new_adv_form" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="act_window_id" ref="sale_action_quotations_new_adv"/>
        </record>

        <record id="sale_action_quotations_new_adv_tree" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_quotation_advertising_tree"/>
            <field name="act_window_id" ref="sale_action_quotations_new_adv"/>
        </record>

        <record id="sale_action_quotations_adv" model="ir.actions.act_window">
            <field name="name">Quotations</field>
            <field name="res_model">sale.order</field>
            <field name="domain">[('opportunity_id', '=', active_id), ('advertising','=',True)]</field>
            <field name="context">{'search_default_opportunity_id': [active_id],
                'default_opportunity_id': active_id, 'default_advertising':True}</field>
        </record>

        <record id="sale_action_quotations_adv_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_order_form_advertising"/>
            <field name="act_window_id" ref="sale_action_quotations_adv"/>
        </record>

        <record id="sale_action_quotations_adv_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_quotation_advertising_tree"/>
            <field name="act_window_id" ref="sale_action_quotations_adv"/>
        </record>

        <record id="view_adv_order_line_tree" model="ir.ui.view">
            <field name="name">sale.adv.order.line.tree</field>
            <field name="model">sale.order.line</field>
            <field name="arch" type="xml">
                <tree string="Sales Order Lines" create="false">
                        <!--button name="%(sale_advertising_order.action_view_ad_order_line_make_invoice)d"
                            string="Create Invoices from selected Order Lines" type="action"
                            class="btn-primary" icon="fa-check text-success"/-->
                        <field name="id"/>
                        <field name="order_id" />
                        <field name="order_partner_id" />
                        <field name="order_advertiser_id" />
                        <field name="order_agency_id" />
                        <field name="title" />
                        <field name="adv_issue" />
                        <field name="ad_class" />
                        <field name="product_id" />
                        <field name="booklet_surface_area"/>
                        <field name="layout_category_id" groups="sale.group_sale_layout"/>
                        <field name="name"/>
                        <field name="ad_number"/>
                        <field name="page_reference"/>
                        <field name="product_uom" />
                        <field name="price_unit" />
                        <field name="product_uom_qty"/>
                        <field name="actual_unit_price"/>
                        <field name="computed_discount" />
                        <field name="subtotal_before_agency_disc" />
                        <field name="discount_dummy" />
                        <field name="tax_id" />
                        <field name="discount" groups="sale.group_discount_per_so_line" invisible="1"/>
                        <field name="price_subtotal" widget="monetary" groups="sale.group_show_price_subtotal"/>
                        <field name="price_total" widget="monetary" groups="sale.group_show_price_total"/>
                        <field name="state" invisible="1"/>
                        <field name="invoice_status" invisible="0"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_adv_order_line_pivot">
            <field name="name">sale.adv.order.line.pivot</field>
            <field name="model">sale.order.line</field>
            <field name="arch" type="xml">
                <pivot string="Advertising Order Lines" display_quantity="true">
                    <field name="title"/>
                    <field name="price_total" type="measure"/>
                </pivot>
            </field>
        </record>

        <record model="ir.ui.view" id="view_adv_order_line_form">
                <field name="name">sale.adv.order.line.form</field>
                <field name="model">sale.order.line</field>
                <field name="arch" type="xml">
                    <form string="Sales Order Lines">
                        <group>
                            <group>
                                <field name="order_partner_id" readonly="0" required="True"
                                       options="{'no_open': True,'no_create': True, 'no_create_edit': True}" />
                                <field name="order_advertiser_id" required="True"
                                       options="{'no_open': True,'no_create': True, 'no_create_edit': True}" />
                                <field name="medium" required="True"
                                       domain="[('parent_id','=', %(sale_advertising_order.advertising_category)d)]"
                                       options="{'no_open': True,'no_create': True, 'no_create_edit': True}"/>
                                <field name="ad_class" required="True"
                                       domain="[('type','!=', 'view'), ('id','child_of', medium)]"
                                       options="{'no_open': True,'no_create': True, 'no_create_edit': True}"/>
                                <field name="title" string="Title"
                                       domain="[('child_ids','!=', False),('medium','child_of', medium)]"
                                       options="{'no_open': True,'no_create': True, 'no_create_edit': True}"
                                       attrs="{'invisible': [('title','=', False)]}"/>
                                <field name="title_ids" string="Titles"
                                       attrs="{'invisible': [('title','!=', False),('title_ids','=', [])]}"
                                       domain="[('parent_id','=', False),('medium','child_of', medium)]"
                                       options="{'no_open': True,'no_create': True, 'no_create_edit': True}"
                                       context="{'search_view_ref':'sale_advertising_order.view_advertising_issue_filter',
                                                 'tree_view_ref':'sale_advertising_order.advertising_issue_titles_tree' }">
                                    <tree create="true" edit="false" delete="true" copy="false">
                                        <field name="name" string="Name" readonly="1"/>
                                    </tree>
                                </field>
                                <field name="deadline_offset" invisible="1" groups="base.group_no_one"/>
                                <field name="deadline_passed" invisible="1" />
                                <field name="deadline" invisible="0" />
                                <field name="adv_issue_ids" string="Advertising Issues" readonly="0"
                                       attrs="{'invisible': ['|',('adv_issue','!=', False),('issue_product_ids','!=', [])]}"
                                       domain="[('parent_id','!=', False),
                                                '|',('parent_id','in', title_ids and title_ids[0][2]),('parent_id','=', title),
                                                '|','|',('deadline','&gt;=', deadline_offset),('deadline','=', False),
                                                        ('issue_date','&lt;=', datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S'))]"
                                       options="{'no_open': True,'no_create': True, 'no_create_edit': True}"
                                       context="{'search_view_ref':'sale_advertising_order.view_advertising_issue_filter', 'tree_view_ref':'sale_advertising_order.advertising_issue_ids_tree' }">
                                    <tree create="true" edit="false" delete="true" copy="false">
                                        <field name="name" string="Name" readonly="1"/>
                                    </tree>
                                </field>
                                <field name="order_id" invisible="1"/>
                                <field name="order_pricelist_id" invisible="1"/>
                                <field name="order_company_id" invisible="1"/>
                                <field name="product_template_id"
                                       context="{'partner_id':order_partner_id, 'quantity':product_uom_qty, 'pricelist':order_pricelist_id, 'uom':product_uom, 'company_id': order_company_id}"
                                       attrs="{'readonly': ['|','|', ('qty_invoiced', '&gt;', 0), ('procurement_ids', '!=', []),
                                                                     ('deadline_passed','=', True)]}"
                                       domain="[('categ_id','=', ad_class)]"
                                       options="{'no_open': True,'no_create': True, 'no_create_edit': True}" required="1"/>
                                <field name="product_id" invisible="0" groups="base.group_no_one"
                                       context="{'partner_id':order_partner_id, 'quantity':product_uom_qty, 'pricelist':order_pricelist_id, 'uom':product_uom, 'company_id': order_company_id}"
                                       attrs="{'readonly': ['|', ('qty_invoiced', '&gt;', 0), ('procurement_ids', '!=', [])]}"
                                       domain="['|','&amp;',('categ_id','=', ad_class),('attribute_value_ids','=', False),('product_tmpl_id','=', product_template_id)]"
                                       options="{'no_open': True,'no_create': True, 'no_create_edit': True}"/>
                                <field name="booklet_surface_area" readonly="1"/>
                                <field name="layout_category_id" groups="sale.group_sale_layout"/>
                                <field name="invoice_status" invisible="1"/>
                                <field name="qty_to_invoice" invisible="1"/>
                                <field name="qty_delivered_updateable" invisible="1"/>
                                <field name="procurement_ids" invisible="1"/>
                                <field name="nett_nett" />
                                <field name="multi_line" invisible="0" groups="base.group_no_one"/>
                                <field name="multi_line_number" invisible="0" readonly="True" groups="base.group_no_one"/>
                                <label for="product_uom_qty" string="Ordered Quantity"/>
                                <div>
                                    <field name="product_uom_qty" class="oe_inline"
                                           context="{'partner_id':order_partner_id, 'quantity':product_uom_qty, 'pricelist':order_pricelist_id,
                                                        'uom':product_uom, 'uom_qty_change':True, 'company_id': order_company_id}"
                                           attrs="{'readonly': [('deadline_passed','=', True)]}"/>
                                    <field name="product_uom" groups="product.group_uom" class="oe_inline oe_no_button"
                                           readonly="True"/>
                                </div>
                                <label for="qty_delivered" string="Delivered Quantity" invisible="context.get('hide_sale')" groups="base.group_no_one"/>
                                <div invisible="context.get('hide_sale')" groups="base.group_no_one">
                                    <field name="qty_delivered" attrs="{'readonly': [('qty_delivered_updateable', '=', False)]}"/>
                                </div>
                                <label for="qty_invoiced" string="Invoiced Quantity" invisible="context.get('hide_sale')" groups="base.group_no_one"/>
                                <div invisible="context.get('hide_sale')" groups="base.group_no_one">
                                    <field name="qty_invoiced" invisible="context.get('hide_sale')"/>
                                </div>
                                <field name="adv_issue" domain="[('parent_id','!=', False),
                                                                ('parent_id','=', title),
                                                                '|','|',('deadline','&gt;=', deadline_offset),
                                                                        ('deadline','=', False),
                                                                        ('issue_date','&lt;=', datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')),]"
                                       options="{'no_open': True,'no_create': True, 'no_create_edit': True}"
                                       attrs="{'invisible': [('adv_issue','=', False)]}"/>
                                <field name="issue_date" readonly="1"
                                       attrs="{'invisible': [('adv_issue','=', False)]}"/>

                            </group>
                            <group>
                                <field name="tax_id" widget="many2many_tags"
                                    domain="[('type_tax_use','=','sale'),('company_id','=',order_id.company_id)]"
                                    groups="sale_advertising_order.group_traffic_user"
                                    attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"/>
                                <field name="price_edit" invisible="1"/>
                                <field name="price_unit" readonly="0" attrs="{'invisible': [('price_edit','!=', True)]}"/>
                                <field name="price_unit_dummy" readonly="1" attrs="{'invisible': [('multi_line','!=', False),('price_edit','=', True)]}"/>
                                <field name="comb_list_price" readonly="True" attrs="{'invisible': [('multi_line','=', False)]}"/>
                                <field name="color_surcharge" />
                                <field name="color_surcharge_amount" attrs="{'invisible': [('color_surcharge','=', False)]}"/>
                                <field name="actual_unit_price" attrs="{'invisible': [('multi_line','=', True)]}"/>
                                <label for="computed_discount" groups="sale.group_discount_per_so_line"/>
                                    <div name="computed_discount" groups="sale.group_discount_per_so_line">
                                        <field name="computed_discount" class="oe_inline"/> %%
                                    </div>
                                <field name="discount_reason_id" attrs="{'invisible': [('computed_discount','=', 0.0)],'required': [('computed_discount','!=', 0.0)]}"/>
                                <field name="subtotal_before_agency_disc" readonly="False"/>
                                <label for="discount" string="Agency Commission" groups="sale.group_discount_per_so_line"/>
                                    <div name="discount" groups="sale.group_discount_per_so_line">
                                        <field name="discount" invisible="1"/>
                                        <field name="discount_dummy" class="oe_inline"/> %%
                                    </div>
                                <field name="price_subtotal" readonly="True" />
                                <field name="date_type" invisible="True"/>
                                <label for="customer_lead" groups="base.group_no_one"/>
                                <div groups="base.group_no_one">
                                    <field name="customer_lead" class="oe_inline" groups="base.group_no_one"/> days
                                </div>
                                <field name="page_class_domain" invisible="1"/>
                                <label for="analytic_tag_ids" string="Page Category"/>
                                <div>
                                    <field name="analytic_tag_ids"
                                           string="Page Category"
                                           widget="many2many_tags"
                                           domain="page_class_domain"
                                           attrs="{'readonly': [('deadline_passed','=', True)]}"/>
                                </div>
                                <field name="proof_number_adv_customer" />
                                <field name="proof_number_payer" />
                            </group>
                        </group>
                        <group>
                            <field name="dates" string="Advertising Dates" colspan="4"
                               attrs="{'invisible':['|','|',('adv_issue','=',False),('title','=',False),('date_type','!=','date')]}">
                                <tree string="Ad Dates" editable="bottom">
                                    <field name="sequence" widget="handle" />
                                    <field name="issue_date" string="Ad Date" required="True" />
                                    <field name="name" string="Comment" />
                                    <field name="page_reference" string="Ref" />
                                    <field name="ad_number" string="Ad No." />
                                </tree>
                            </field>
                            <field name="dateperiods" string="Advertising Periods" colspan="4"
                                attrs="{'invisible':['|','|',('adv_issue','=',False), ('title','=',False),('date_type','!=','validity')]}">
                                <tree string="Ad Periods" editable="bottom">
                                    <field name="sequence" widget="handle" />
                                    <field name="from_date" string="Start of Validity" required="True"/>
                                    <field name="to_date" string="End of Validity" required="True"/>
                                    <field name="name" string="Comment" />
                                    <field name="page_reference" string="Ref" />
                                    <field name="ad_number" string="Ad No." />
                                </tree>
                            </field>
                            <field name="issue_product_ids" string="Adv.Issues with Products and Prices"
                                   attrs="{'invisible':['|',('issue_product_ids','=',[]),('medium','!=', %(sale_advertising_order.newspaper_advertising_category)d)]}"
                                   options="{'no_create': True, 'no_create_edit': True}" readonly="0">
                                <tree string="Issues Products Prices" editable="bottom">
                                    <field name="adv_issue_id" string="Issue" domain="[('parent_id','in', parent.title_ids and parent.title_ids[0][2])]"/>
                                    <field name="product_attribute_value_id" invisible="True" />
                                    <field name="product_id" string="Product" domain="[('product_tmpl_id','=', parent.product_template_id), ('attribute_value_ids','in', product_attribute_value_id)]"/>
                                    <field name="price_unit" string="Unit Price"/>
                                    <field name="qty" string="Qty"/>
                                    <field name="price" string="Price"/>
                                    <field name="page_reference" string="Ref" />
                                    <field name="ad_number" string="Ad No." />
                                    <field name="url_to_material" string="URL Ad Material" />
                                </tree>
                            </field>

                            <group name="ad_refs" attrs="{'invisible':[('multi_line','!=', False)]}">
                                <field name="ad_number"/>
                                <field name="page_reference"/>
                                <field name="url_to_material" />
                            </group>
                            <group attrs="{'invisible':['|',('multi_line','!=', False), ('date_type','!=','validity')]}">
                                <field name="from_date"
                                       attrs="{'invisible':['|',('multi_line','!=', False),('date_type','!=','validity')]}"/>
                                <field name="to_date"
                                       attrs="{'invisible':['|',('multi_line','!=', False), ('date_type','!=','validity')]}"/>
                            </group>
                        </group>
                        <group>
                            <group>
                                <separator string="Material Remarks" colspan="2"/>
                                <field name="layout_remark" colspan="2" nolabel="1"/>
                            </group>
                            <group>
                                <separator string="Mapping Remarks" colspan="2"/>
                                <field name="name" colspan="2" nolabel="1"/>
                            </group>
                            <group>
                                <separator string="Migration Remarks" colspan="2"/>
                                <field name="mig_remark" colspan="2" nolabel="1"/>
                            </group>
                        </group>
                        <div groups="base.group_no_one">
                            <label for="invoice_lines"/>
                            <field name="invoice_lines"/>
                        </div>
                        <field name="state" invisible="1"/>
                    </form>
                    <!--form string="Sales Order Lines">
                        <group>
                            <group>
                                <field name="title" string="Title" domain="[('child_ids','!=', False)]" required="True"
                                       options="{'limit': 10, 'create': false, 'create_edit': false}"/>
                                <field name="medium" invisible="1" />
                                <field name="ad_class"  required="1"
                                       domain="[('type','!=', 'view'), ('id','child_of', medium)]" options="{'limit': 10, 'create': false, 'create_edit': false}"/>
                                <field name="product_id"
                                       context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'company_id': parent.company_id}"
                                       attrs="{'readonly': ['|', ('qty_invoiced', '&gt;', 0), ('procurement_ids', '!=', [])]}"
                                       domain="[('categ_id','=', ad_class)]"
                                       options="{'limit': 10, 'create': false, 'create_edit': false}"/>
                                <field name="layout_category_id" groups="sale.group_sale_layout"/>
                                <field name="invoice_status" invisible="1"/>
                                <field name="qty_to_invoice" invisible="1"/>
                                <field name="qty_delivered_updateable" invisible="1"/>
                                <field name="procurement_ids" invisible="1"/>
                                <field name="price_subtotal" invisible="1"/>
                                <label for="product_uom_qty" string="Ordered Quantity"/>
                                <div>
                                    <field
                                        context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'uom_qty_change':True, 'company_id': parent.company_id}"
                                        name="product_uom_qty" class="oe_inline"/>
                                    <field name="product_uom" groups="product.group_uom" class="oe_inline oe_no_button"
                                        attrs="{'readonly': [('state', 'in', ('sale','done', 'cancel'))]}"
                                        invisible="1"/>
                                </div>
                                <label for="qty_delivered" string="Delivered Quantity" invisible="context.get('hide_sale')"/>
                                <div invisible="context.get('hide_sale')">
                                    <field name="qty_delivered" attrs="{'readonly': [('qty_delivered_updateable', '=', False)]}"/>
                                </div>
                                <label for="qty_invoiced" string="Invoiced Quantity" invisible="context.get('hide_sale')"/>
                                <div invisible="context.get('hide_sale')">
                                    <field name="qty_invoiced" invisible="context.get('hide_sale')"/>
                                </div>
                                <field name="adv_issue" domain="[('parent_id','=', title)]" attrs="{'invisible':['|',('adv_issue','=',False),('title','=',False)]}"
                                       options="{'limit': 10, 'create': false, 'create_edit': false}"/>
                                <field name="adv_issue_ids" string="Advertising Issues"
                                       domain="[('id','child_of', title)]"
                                       options="{'limit': 10, 'create': false, 'create_edit': false}">
                                        <tree >
                                            <field name="name" string="Name"/>
                                        </tree>
                                </field>
                            </group>
                            <group>
                                <field name="tax_id" widget="many2many_tags"
                                    domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                                    groups="sale_advertising_order.group_traffic_user"
                                    attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"/>
                                <field name="price_unit" readonly="True" />
                                <field name="actual_unit_price" />
                                <label for="computed_discount" groups="sale.group_discount_per_so_line"/>
                                    <div name="computed_discount" groups="sale.group_discount_per_so_line">
                                        <field name="computed_discount" class="oe_inline"/> %%
                                    </div>
                                <field name="subtotal_before_agency_disc" readonly="False"/>
                                <label for="discount" string="Agency Commission" groups="sale.group_discount_per_so_line"/>
                                    <div name="discount" groups="sale.group_discount_per_so_line">
                                        <field name="discount" invisible="1"/>
                                        <field name="discount_dummy" class="oe_inline"/> %%
                                    </div>
                                <field name="price_subtotal" readonly="True" />
                                <field name="date_type" invisible="True"/>
                                <label for="customer_lead"/>
                                <div>
                                    <field name="customer_lead" class="oe_inline"/> days
                                </div>
                                <label for="analytic_tag_ids"/>
                                <div>
                                    <field name="analytic_tag_ids" widget="many2many_tags"/>
                                </div>
                            </group>
                        </group>
                        <group>
                            <field name="dates" string="Advertising Dates" colspan="4"
                               attrs="{'invisible':['|','|',('adv_issue','=',False),('title','=',False),('date_type','!=','date')]}">
                                <tree string="Ad Dates" editable="bottom">
                                    <field name="sequence" widget="handle" />
                                    <field name="issue_date" string="Ad Date" required="True" />
                                    <field name="name" string="Comment" />
                                    <field name="page_reference" string="Ref" />
                                    <field name="ad_number" string="Ad No." />
                                </tree>
                            </field>
                            <field name="dateperiods" string="Advertising Periods" colspan="4"
                                attrs="{'invisible':['|','|',('adv_issue','=',False), ('title','=',False),('date_type','!=','validity')]}">
                                <tree string="Ad Periods" editable="bottom">
                                    <field name="sequence" widget="handle" />
                                    <field name="from_date" string="Start of Validity" required="True"/>
                                    <field name="to_date" string="End of Validity" required="True"/>
                                    <field name="name" string="Comment" />
                                    <field name="page_reference" string="Ref" />
                                    <field name="ad_number" string="Ad No." />
                                </tree>
                            </field>

                            <group attrs="{'invisible':['|','|',('adv_issue','=',False), ('title','=',False),('date_type','in',['date','validity'])]}">
                                <field name="ad_number" attrs="{'invisible':['|','|',('adv_issue','=',False), ('title','=',False),('date_type','in',['date','validity'])]}"/>
                                <field name="page_reference" attrs="{'invisible':['|','|',('adv_issue','=',False), ('title','=',False),('date_type','in',['date','validity'])]}"/>
                            </group>
                            <group attrs="{'invisible':['|','|',('adv_issue','=',False), ('title','=',False),('date_type','in',['date','validity'])]}">
                                <field name="from_date" attrs="{'invisible':['|','|',('adv_issue','=',False), ('title','=',False),('date_type','in',['date','validity'])]}"/>
                                <field name="to_date" attrs="{'invisible':['|','|',('adv_issue','=',False), ('title','=',False),('date_type','in',['date','validity'])]}"/>
                            </group>
                        </group>
                        <group>
                            <group>
                                <separator string="Layout Remark" colspan="2"/>
                                <field name="layout_remark" colspan="2" nolabel="1"/>
                            </group>
                            <group>
                                <separator string="Description" colspan="2"/>
                                <field name="name" colspan="2" nolabel="1"/>
                            </group>
                        </group>
                        <div groups="base.group_no_one">
                            <label for="invoice_lines"/>
                            <field name="invoice_lines"/>
                        </div>
                        <field name="state" invisible="1"/>
                    </form-->
                </field>
        </record>

        <record id="view_advertising_sales_order_line_filter" model="ir.ui.view">
            <field name="name">adv.sale.order.line.select</field>
            <field name="model">sale.order.line</field>
            <field name="arch" type="xml">
                <search string="Search Advertising Sales Order Lines">
                    <filter string="To Invoice" domain="[('qty_to_invoice','&lt;&gt;', 0)]"  help="Sales Order Lines ready to be invoiced"/>
                    <separator/>
                    <filter string="My Sales Order Lines" domain="[('salesman_id','=',uid)]" help="Sales Order Lines related to a Sales Order of mine"/>
                    <filter name="accmgr_sale_orders_filter" string="My Sales Order Lines (Account Manager)"
                            domain="[('partner_acc_mgr','=',uid)]" help="My Sales Order Lines as Account manager" />
                    <filter name="issue_date_sale_orders_filter" string="Order Lines with Issue Date before today"
                            domain="[('issue_date','&lt;=', datetime.datetime.now())]" help="Order Lines with Issue Date before today" />
                    <field name="order_id"/>
                    <field name="order_partner_id" operator="child_of"/>
                    <field name="order_advertiser_id" operator="child_of"/>
                    <field name="order_agency_id" operator="child_of"/>
                    <field name="product_id"/>
                    <field name="salesman_id"/>
                    <field name="partner_acc_mgr"/>
                    <field name="issue_date"/>
                    <group expand="0" string="Group By">
                        <filter string="Customer" domain="[]" context="{'group_by':'order_partner_id'}"/>
                        <filter string="Advertiser" domain="[]" context="{'group_by':'order_advertiser_id'}"/>
                        <filter string="Agency" domain="[]" context="{'group_by':'order_agency_id'}"/>
                        <filter string="Product" domain="[]" context="{'group_by':'product_id'}"/>
                        <filter string="Order" domain="[]" context="{'group_by':'order_id'}"/>
                        <filter string="Salesperson" domain="[]" context="{'group_by':'salesman_id'}"/>
                        <filter string="Account Manager" icon="terp-personal" domain="[]" context="{'group_by':'partner_acc_mgr'}"/>
                        <filter string="Issue Date" icon="terp-personal" domain="[]" context="{'group_by':'issue_date'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="all_advertising_order_lines_action">
			<field name="name">All Advertising Sale Order Lines</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">sale.order.line</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form,pivot</field>
            <field name="search_view_id" ref="view_advertising_sales_order_line_filter"/>
			<field name="domain">[('advertising','!=',False),('state','in',('sale','done'))]</field>
		</record>

        <record id="all_advertising_order_lines_action_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_adv_order_line_tree"/>
            <field name="act_window_id" ref="all_advertising_order_lines_action"/>
        </record>

        <record id="all_advertising_order_lines_action_tree_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">pivot</field>
            <field name="view_id" ref="view_adv_order_line_pivot"/>
            <field name="act_window_id" ref="all_advertising_order_lines_action"/>
        </record>

        <record id="all_advertising_order_lines_action_form_view" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_adv_order_line_form"/>
            <field name="act_window_id" ref="all_advertising_order_lines_action"/>
        </record>


<!-- View for sale.advertising.issue object -->
		<record model="ir.ui.view" id="sale_advertising_issue_form">
			<field name="name">sale.advertising.issue.form</field>
			<field name="type">form</field>
			<field name="model">sale.advertising.issue</field>
			<field name="arch" type="xml">
				<form string="Advertising issue" >
					<sheet>
                        <div class="oe_button_box" name="button_box">
                            <button name="toggle_active" type="object" groups="base.group_user" class="oe_stat_button" icon="fa-archive">
                                <field name="active" widget="boolean_button" options="{&quot;terminology&quot;: &quot;archive&quot;}"/>
                            </button>
                        </div>
						<group col="4" colspan="4" >
							<field name="name" string="Name"/>
                            <field name="code" string="Code"/>
                            <field name="medium_domain" invisible="1"/>
							<field name="parent_id" string="Title" domain="[('parent_id','=', False)]"/>
                            <field name="price_edit" string="Price Editable"
                                   attrs="{'invisible':[('parent_id','=',True)]}"/>
                            <field name="medium" string="Medium" domain="medium_domain"
                                   options="{'no_create': True, 'no_create_edit': True}"/>
                            <field name="product_attribute_value_id" string="Variant Title"
                                   attrs="{'required':[('parent_id','=',False),
                                   ('medium','in', (%(sale_advertising_order.newspaper_advertising_category)d,
                                                    %(sale_advertising_order.magazine_advertising_category)d))]}"/>
							<field name="analytic_account_id" string="Related Analytic Account"/>
							<field name="issue_date" string="Issue Date"/>
                            <field name="issue_week_number" string="Week Number"/>
                            <field name="deadline" string="Deadline"/>
							<field name="default_note" string="Default Note" />
							<field name="state" string="State" />
                        </group>
                            <field name="available_ids" string="Availability" >
                                 <tree string="Availability">
                                    <field name="name" string="Name"/>
                                    <field name="page_id" string="Ad Page"/>
                                    <field name="order_line_id" string="Ad Placement"/>
                                    <field name="available_qty" string="Quantity"/>
                                 </tree>
                            </field>
                        <group class="oe_subtotal_footer oe_right">
                            <field name="amount_total" class="oe_subtotal_footer_separator"/>
                        </group>
					</sheet>
				</form>
			</field>
		</record>

		<record id="sale_advertising_issue_tree" model="ir.ui.view" >
			<field name="name">sale.advertising.issue.tree</field>
			<field name="type">tree</field>
			<field name="model">sale.advertising.issue</field>
			<field name="arch" type="xml">
				<tree string="Advertising issue">
                    <field name="name" string="Name"/>
                    <field name="code" string="Code"/>
                    <field name="parent_id" string="Title"/>
                    <field name="product_attribute_value_id" string="Variant Title"/>
                    <field name="analytic_account_id" string="Related Analytic Account"/>
                    <field name="issue_date" string="Issue Date"/>
                    <field name="issue_week_number" string="Week Number"/>
                    <field name="week_number_even" invisible="False"/>
                    <field name="deadline" string="Deadline"/>
                    <field name="medium" string="Medium"/>
                    <field name="default_note" string="Default Note" />
                    <field name="state" string="State" />
				</tree>
			</field>
		</record>

        <!--view for search view "Titles" in Order Line -->
        <record id="advertising_issue_titles_tree" model="ir.ui.view" >
			<field name="name">sale.advertising.issue.tree</field>
			<field name="type">tree</field>
			<field name="model">sale.advertising.issue</field>
			<field name="arch" type="xml">
				<tree string="Advertising issue">
                    <field name="name" string="Name"/>
                    <field name="code" string="Code"/>
                    <field name="product_attribute_value_id" string="Variant Title"/>
                    <field name="analytic_account_id" string="Related Analytic Account"/>
                    <field name="medium" string="Medium"/>
                    <field name="default_note" string="Default Note" />
                    <field name="state" string="State" />
				</tree>
			</field>
		</record>

        <!--view for search view "Issues" in Order Line -->
        <record id="advertising_issue_ids_tree" model="ir.ui.view" >
			<field name="name">sale.advertising.issue.tree</field>
			<field name="type">tree</field>
			<field name="model">sale.advertising.issue</field>
			<field name="arch" type="xml">
				<tree string="Advertising issue">
                    <field name="name" string="Name"/>
                    <field name="code" string="Code"/>
                    <field name="parent_id" string="Title"/>
                    <field name="analytic_account_id" string="Related Analytic Account"/>
                    <field name="issue_date" string="Issue Date"/>
                    <field name="issue_week_number" string="Week Number"/>
                    <field name="week_number_even" invisible="1"/>
                    <field name="deadline" string="Deadline"/>
                    <field name="medium" string="Medium"/>
                    <field name="default_note" string="Default Note" />
                    <field name="state" string="State" />
				</tree>
			</field>
		</record>

        <record id="view_advertising_issue_filter" model="ir.ui.view">
            <field name="name">sale.advertising.issue.tree</field>
            <field name="model">sale.advertising.issue</field>
            <field name="arch" type="xml">
                <search string="Search Advertising Titles/Issues">
                    <filter string="Titles" domain="[('parent_id','=', False)]"/>
                    <filter string="Issues" domain="[('parent_id','!=', False)]"/>
                    <separator/>
                    <filter string="Even Week Numbers" domain="[('week_number_even','=', True)]" help="Issues in even weeks"/>
                    <filter string="Uneven Week Numbers" domain="[('week_number_even','=',False)]" help="Issues in uneven weeks"/>
                    <field name="name"/>
                    <field name="parent_id" operator="child_of"/>
                    <field name="medium"/>
                    <field name="analytic_account_id"/>
                    <group expand="0" string="Group By">
                        <filter string="Weeknumbers" domain="[]" context="{'group_by':'issue_week_number'}"/>
                        <filter string="Title" domain="[]" context="{'group_by':'parent_id'}"/>
                        <filter string="Issue Date" domain="[]" context="{'group_by':'issue_date'}"/>
                    </group>
                </search>
            </field>
        </record>

		<record model="ir.actions.act_window" id="action_sale_advertising_issue">
			<field name="name">Advertising Issue</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">sale.advertising.issue</field>
			<field name="view_type">form</field>
			<field name="view_id" ref="sale_advertising_issue_tree"/>
		</record>

        <!-- View for sale.advertising.page object -->

		<record model="ir.ui.view" id="sale_advertising_page_form">
			<field name="name">sale.advertising.page.form</field>
			<field name="type">form</field>
			<field name="model">sale.advertising.page</field>
			<field name="arch" type="xml">
				<form string="Advertising issue" >
					<sheet>
						<group >
							<field name="name" string="Page Name"/>
                        </group>
					</sheet>
				</form>
			</field>
		</record>

		<record id="sale_advertising_page_tree" model="ir.ui.view" >
			<field name="name">sale.advertising.page.tree</field>
			<field name="type">tree</field>
			<field name="model">sale.advertising.page</field>
			<field name="arch" type="xml">
				<tree string="Advertising Pages">
						<field name="name" string="Page Name"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_sale_advertising_page">
			<field name="name">Advertising Page</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">sale.advertising.page</field>
			<field name="view_type">form</field>
			<field name="view_id" ref="sale_advertising_page_tree"/>
		</record>

        <!-- View for sale.advertising.available object -->

		<record model="ir.ui.view" id="sale_advertising_available_form">
			<field name="name">sale.advertising.available.form</field>
			<field name="type">form</field>
			<field name="model">sale.advertising.available</field>
			<field name="arch" type="xml">
				<form string="Page Availablity" >
					<sheet>
						<group >
                            <field name="adv_issue_id" string="Issue"/>
                            <field name="issue_date" />
							<field name="name" string="Page Name"/>
                            <field name="page_id" string="Ad Page"/>
                            <field name="order_line_id" string="Ad Placement" readonly="1"/>
                            <field name="available_qty" string="Quantity"/>
                        </group>
					</sheet>
				</form>
			</field>
		</record>

		<record id="sale_advertising_available_tree" model="ir.ui.view" >
			<field name="name">sale.advertising.available.tree</field>
			<field name="type">tree</field>
			<field name="model">sale.advertising.available</field>
			<field name="arch" type="xml">
                <tree name="page_available" string="Page Availablity" create="0" delete="0" readonly="1">
                    <field name="adv_issue_id" string="Issue" />
                    <field name="issue_date" />
                    <field name="name" string="Name" />
                    <field name="page_id" string="Ad Page" />
                    <field name="order_line_id" string="Ad Placement" />
                    <field name="available_qty" string="Quantity" />
                </tree>
			</field>
		</record>

        <record id="sale_advertising_available_tree_manage" model="ir.ui.view" >
			<field name="name">sale.advertising.available.tree.manage</field>
			<field name="type">tree</field>
			<field name="model">sale.advertising.available</field>
            <field name="inherit_id" ref="sale_advertising_order.sale_advertising_available_tree"/>
            <field name="groups_id" eval="[(4, ref('sale_advertising_order.group_traffic_user'))]"/>
			<field name="arch" type="xml">
                <tree name="page_available" position="attributes" >
                    <attribute name="create" >1</attribute>
                    <attribute name="delete" >1</attribute>
                    <attribute name="readonly" >0</attribute>
                </tree>
			</field>
		</record>


		<record model="ir.actions.act_window" id="action_sale_advertising_available">
			<field name="name">Advertising Pages</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">sale.advertising.available</field>
			<field name="view_type">form</field>
			<field name="view_id" ref="sale_advertising_available_tree"/>
		</record>

        <record id="view_advertising_available_filter" model="ir.ui.view">
            <field name="name">sale.advertising.available.filter</field>
            <field name="model">sale.advertising.available</field>
            <field name="arch" type="xml">
                <search string="Search Advertising Availability">
                    <filter string="Opboekingen" domain="[('available_qty','&gt;=', 0)]"/>
                    <filter string="Afboekingen" domain="[('available_qty','&lt;', 0)]"/>
                    <separator/>
                    <field name="name"/>
                    <field name="adv_issue_id" />
                    <field name="page_id"/>
                    <group expand="0" string="Group By">
                        <filter string="Issues" domain="[]" context="{'group_by':'adv_issue_id'}"/>
                        <filter string="Page" domain="[]" context="{'group_by':'page_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- View for discount.reason object -->

		<record model="ir.ui.view" id="discount_reason_form">
			<field name="name">discount.reason.form</field>
			<field name="type">form</field>
			<field name="model">discount.reason</field>
			<field name="arch" type="xml">
				<form string="Discount Reason" >
					<sheet>
						<group >
							<field name="name" string="Page Name"/>
                        </group>
					</sheet>
				</form>
			</field>
		</record>

		<record id="discount_reason_tree" model="ir.ui.view" >
			<field name="name">discount.reason.tree</field>
			<field name="type">tree</field>
			<field name="model">discount.reason</field>
			<field name="arch" type="xml">
				<tree string="Discount Reasons">
						<field name="name" string="Page Name"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_discount_reason">
			<field name="name">Discount Reasons</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">discount.reason</field>
			<field name="view_type">form</field>
			<field name="view_id" ref="discount_reason_tree"/>
		</record>

<!-- View for sale.advertising.proof object -->
		<record model="ir.ui.view" id="sale_advertising_proof_form">
			<field name="name">sale.advertising.proof.form</field>
			<field name="type">form</field>
			<field name="model">sale.advertising.proof</field>
			<field name="arch" type="xml">
				<form string="Advertising proof">
					<sheet>
						<group>
							<field name="name" />
							<field name="address_id" />
							<field name="number" />
							<field name="target_id" />
						</group>
					</sheet>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="sale_advertising_proof_tree">
			<field name="name">sale.advertising.proof.tree</field>
			<field name="type">tree</field>
			<field name="model">sale.advertising.proof</field>
			<field name="arch" type="xml">
				<tree string="Advertising proof">
						<field name="name"/>
						<field name="number"/>
						<field name="target_id"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_sale_advertising_proof">
			<field name="name">Advertising Proof</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">sale.advertising.proof</field>
			<field name="view_type">form</field>
			<field name="view_id" ref="sale_advertising_proof_tree"/>
		</record>

        <record id="sale.action_quotations" model="ir.actions.act_window">
            <field name="domain">[('state','in',('draft','sent','cancel')),('advertising','=',False)]</field>
        </record>

        <record id="sale.action_orders" model="ir.actions.act_window">
            <field name="domain">[('state','not in',('draft','sent','cancel')), ('advertising','=',False)]</field>
        </record>

        <record id="sale.action_orders_salesteams" model="ir.actions.act_window">
            <field name="domain">[('state','not in',('draft','sent','cancel')), ('advertising','=',False)]</field>
        </record>

        <record id="sale.action_orders_to_invoice_salesteams" model="ir.actions.act_window">
            <field name="domain">[('state', '=', 'sale'),('invoice_status','=','to invoice'), ('advertising','=',False)]</field>
        </record>

        <record id="sale_crm.sale_action_quotations_new" model="ir.actions.act_window">
            <field name="domain">[('opportunity_id', '=', active_id), ('advertising','=',False)]</field>
        </record>

        <record id="sale_crm.sale_action_quotations" model="ir.actions.act_window">
            <field name="domain">[('opportunity_id', '=', active_id), ('state','not in',['sale','done'])]</field>
        </record>

        <record model="ir.ui.view" id="view_sale_order_graph2">
            <field name="name">sale.order.graph</field>
            <field name="model">sale.order</field>
            <field name="arch" type="xml">
                <graph string="Sales Orders">
                    <field name="partner_id" type="row"/>
                    <field name="confirmation_date" type="col"/>
                    <field name="amount_untaxed" type="measure"/>
                </graph>
            </field>
        </record>
        <record model="ir.ui.view" id="view_sale_order_pivot2">
            <field name="name">sale.order.pivot</field>
            <field name="model">sale.order</field>
            <field name="arch" type="xml">
                <pivot string="Sales Orders">
                    <field name="partner_id" type="row"/>
                    <field name="confirmation_date" type="col"/>
                    <field name="amount_untaxed" type="measure"/>
                </pivot>
            </field>
        </record>

        <record id="action_sale_order_report_all" model="ir.actions.act_window">
            <field name="name">Sales Analysis</field>
            <field name="res_model">sale.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">pivot,graph</field>
            <field name="view_ids"
               eval="[(5, 0, 0), (0, 0, {'view_mode': 'pivot', 'view_id': ref('sale_advertising_order.view_sale_order_pivot2')}),
                      (0, 0, {'view_mode': 'graph', 'view_id': ref('sale_advertising_order.view_sale_order_graph2')})]"/>
            <field name="context">{'search_default_sales':1, 'search_default_my_sale_orders_filter':1}</field>
            <field name="search_view_id" ref="sale_advertising_order.advertising_order_view_search_inherit_sale"/>
            <field name="help">From this report, you can have an overview of the sale confirmed with your customers. The search tool can also be used to personalise your Sales reports and so, match this analysis to your needs.</field>
        </record>

        <record id="crm_team_salesteams_view_kanban" model="ir.ui.view">
            <field name="name">crm.team.kanban</field>
            <field name="model">crm.team</field>
            <field name="inherit_id" ref="sale.crm_team_salesteams_view_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@widget='progress']" position="attributes">
                        <attribute name="title">Revenue</attribute>
                </xpath>
                <xpath expr="//div[contains(@class, 'row mb4')]" position="after">
                    <div class="row mb4">
                        <div class="col-xs-8">
                            <a>
                                Revenue This Month
                            </a>
                        </div>
                        <div class="col-xs-4 text-right">
                            <field name="invoiced" widget="monetary"/>
                        </div>
                    </div>
                    <div class="row mb4">
                        <div class="col-xs-8">
                            <a>
                                Revenue Target
                            </a>
                        </div>
                        <div class="col-xs-4 text-right">
                            <field name="invoiced_target" widget="monetary"/>
                        </div>
                    </div>
                </xpath>
            </field>
        </record>

        <!-- search view of crm.activity.report inherited-->
        <record id="crm_activity_report_view_search" model="ir.ui.view">
            <field name="name">crm.activity.report.search</field>
            <field name="inherit_id" ref="crm.crm_activity_report_view_search"></field>
            <field name="model">crm.activity.report</field>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='author_id']" position="after">
                    <field name="partner_id"/>
                    <field name="lead_id" string="Opportunity"/>
                </xpath>
                <xpath expr="//filter[@name='opportunity']" position="after">
                    <separator/>
                    <filter name="activities" string="Activities Log" domain="[('subtype_id','not in', ('Lead Created','Stage Changed','Opportunity Won','Discussions','Note','Lead aangemaakt','Fase gewijzigd','Prospect gewonnen','Discussies','Notitie')), ('subtype_id','!=',False)]" help="Show only activities logged with Activities available in configuration"/>
                </xpath>
                <xpath expr="//filter[@name='group_by_opportunity']" position="after">
                    <filter name="user_id" string="Salesperson" context="{'group_by':'user_id'}"/>
                    <filter name="subtype_id" string="Activity" context="{'group_by':'subtype_id'}"/>
                    <filter name="partner_id" string="Partner" context="{'group_by':'partner_id'}"/>
                </xpath>
            </field>
        </record>

        <!-- tree view of crm.activity.report inherited-->
        <record id="crm_activity_report_view_tree" model="ir.ui.view">
            <field name="name">crm.activity.report.tree</field>
            <field name="inherit_id" ref="crm.crm_activity_report_view_tree"></field>
            <field name="model">crm.activity.report</field>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='author_id']" position="after">
                    <field name="lead_id" string="Opportunity"/>
                    <field name="partner_id" />
                </xpath>
            </field>
        </record>

        <!-- action of crm.activity.report tree view-->
        <record id="crm_activity_report_action_tree" model="ir.actions.act_window">
           <field name="name">Activities Log</field>
           <field name="res_model">crm.activity.report</field>
           <field name="view_type">form</field>
           <field name="view_mode">tree</field>
           <field name="context">{'search_default_activities':1}</field>
           <field name="domain">[]</field>
       </record>

	</data>
</odoo>
